{"ast":null,"code":"import _classCallCheck from\"/Users/lgedeon/Repos/personal/stimpy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/lgedeon/Repos/personal/stimpy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/lgedeon/Repos/personal/stimpy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/lgedeon/Repos/personal/stimpy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Droppable}from'react-drag-and-drop';import{withRouter}from'react-router-dom';import Overlay from'../Overlay';import{SECTIONS}from'../constants.js';import*as services from'../utils/services.js';import ListTasks from'../ListTasks';import{CarPartsLi,StyledCar,ListPartsUl,StyledTextError,Row,RowStatus,StyledText}from'./styled.jsx';var Car=/*#__PURE__*/function(_React$Component){_inherits(Car,_React$Component);var _super=_createSuper(Car);function Car(props){var _this;_classCallCheck(this,Car);_this=_super.call(this,props);_this.state={};return _this;}_createClass(Car,[{key:\"onCleanErrors\",value:function onCleanErrors(){var setError=this.props.setError;setError(null);}},{key:\"onFillTank\",value:function onFillTank(data){var _this2=this;var _this$props=this.props,car=_this$props.car,setError=_this$props.setError,setLoading=_this$props.setLoading,setScore=_this$props.setScore;var mechanicId=Object.values(data)[0];setLoading(true);services.fillTank(car.id,mechanicId).then(function(response){_this2.onUpdate(response.data);setScore(5);}).catch(function(error){return setError(\"(\".concat(error.response.data.code,\") - \").concat(error.response.data.message));}).finally(function(){return setLoading(false);});}},{key:\"onLiftCar\",value:function onLiftCar(data){var _this3=this;var _this$props2=this.props,car=_this$props2.car,setError=_this$props2.setError,setLoading=_this$props2.setLoading,setScore=_this$props2.setScore;var mechanicId=Object.values(data)[0];setLoading(true);services.liftCar(car.id,mechanicId).then(function(response){_this3.onUpdate(response.data);setScore(5);}).catch(function(error){return setError(\"(\".concat(error.response.data.code,\") - \").concat(error.response.data.message));}).finally(function(){return setLoading(false);});}},{key:\"onUpdate\",value:function onUpdate(data){var setStatus=this.props.setStatus;this.onCleanErrors();setStatus(data);}},{key:\"onDropWheel\",value:function onDropWheel(e){var setMechanic=this.props.setMechanic;var mechanicId=Object.values(e)[0];setMechanic(mechanicId);this.onShowTask();}},{key:\"onDragEnter\",value:function onDragEnter(position){var setWheelPosition=this.props.setWheelPosition;setWheelPosition(position);}},{key:\"onShowTask\",value:function onShowTask(){var showTasks=this.props.showTasks;this.onCleanErrors();showTasks(true);}},{key:\"componentDidMount\",value:function componentDidMount(){var car=this.props.car;this.onCleanErrors();!car&&this.props.history.push(SECTIONS[0]);}},{key:\"render\",value:function render(){var _this4=this;var _this$props3=this.props,car=_this$props3.car,wheel_tasks=_this$props3.wheel_tasks,error=_this$props3.error,loading=_this$props3.loading;return/*#__PURE__*/React.createElement(\"div\",null,loading&&/*#__PURE__*/React.createElement(Overlay,null),/*#__PURE__*/React.createElement(StyledCar,null,/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Droppable,{types:[\"gasman\"],onDrop:this.onFillTank.bind(this)},/*#__PURE__*/React.createElement(ListPartsUl,null,/*#__PURE__*/React.createElement(CarPartsLi,{key:\"fuel\"},/*#__PURE__*/React.createElement(\"div\",{className:\"car-wheel fuel\"})))),car&&car.wheels&&car.wheels.length>0&&/*#__PURE__*/React.createElement(ListPartsUl,null,car.wheels.map(function(wheel){return/*#__PURE__*/React.createElement(CarPartsLi,{key:wheel.position},/*#__PURE__*/React.createElement(\"div\",{className:\"car-wheel \".concat(wheel.position)},/*#__PURE__*/React.createElement(Droppable,{types:[\"mechanic\"],className:\"drop\",onDrop:_this4.onDropWheel.bind(_this4),onDragEnter:function onDragEnter(){return _this4.onDragEnter(wheel.position);}},wheel.status)));})),/*#__PURE__*/React.createElement(Droppable,{types:[\"jackman\"],onDrop:this.onLiftCar.bind(this)},/*#__PURE__*/React.createElement(ListPartsUl,null,/*#__PURE__*/React.createElement(CarPartsLi,{key:\"lifted\"},/*#__PURE__*/React.createElement(\"div\",{className:\"car-wheel lifted\"})))))),/*#__PURE__*/React.createElement(RowStatus,null,/*#__PURE__*/React.createElement(StyledText,null,\"Fuel \".concat(car.fuel)),/*#__PURE__*/React.createElement(StyledText,null,car.lifted?\"Lifted\":\"No Lifted\")),/*#__PURE__*/React.createElement(Row,null,error&&/*#__PURE__*/React.createElement(StyledTextError,null,error),/*#__PURE__*/React.createElement(ListTasks,{tasks:wheel_tasks,onUpdate:this.onUpdate})));}}]);return Car;}(React.Component);export default withRouter(Car);","map":{"version":3,"sources":["/Users/lgedeon/Repos/personal/stimpy/src/Car/presentational.jsx"],"names":["React","Droppable","withRouter","Overlay","SECTIONS","services","ListTasks","CarPartsLi","StyledCar","ListPartsUl","StyledTextError","Row","RowStatus","StyledText","Car","props","state","setError","data","car","setLoading","setScore","mechanicId","Object","values","fillTank","id","then","response","onUpdate","catch","error","code","message","finally","liftCar","setStatus","onCleanErrors","e","setMechanic","onShowTask","position","setWheelPosition","showTasks","history","push","wheel_tasks","loading","onFillTank","bind","wheels","length","map","wheel","onDropWheel","onDragEnter","status","onLiftCar","fuel","lifted","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Droppable } from 'react-drag-and-drop'\nimport { withRouter } from 'react-router-dom';\nimport Overlay from '../Overlay';\nimport { SECTIONS } from '../constants.js';\nimport * as services from '../utils/services.js';\nimport ListTasks from '../ListTasks';\nimport { \n\tCarPartsLi, \n\tStyledCar, \n\tListPartsUl, \n\tStyledTextError,\n\tRow,\n\tRowStatus,\n\tStyledText,\n} from './styled.jsx';\n\nclass Car extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\t}\n\n\tonCleanErrors() {\n\t\tconst { setError } = this.props;\n\t\tsetError(null);\n\t}\n\n\tonFillTank(data) {\n\t\tconst { car, setError, setLoading, setScore } = this.props;\n\t\tconst mechanicId = Object.values(data)[0];\n\t\tsetLoading(true);\n\t\tservices.fillTank(car.id, mechanicId)\n\t\t\t.then((response) => {\n\t\t\t\tthis.onUpdate(response.data);\n\t\t\t\tsetScore(5);\n\t\t\t})\n\t\t\t.catch((error) => setError(`(${error.response.data.code}) - ${error.response.data.message}`))\n\t\t\t.finally(() => setLoading(false))\n\t}\n\n\tonLiftCar(data) {\n\t\tconst { car, setError, setLoading, setScore, } = this.props;\n\t\tconst mechanicId = Object.values(data)[0];\n\t\tsetLoading(true);\n\n\t\tservices.liftCar(car.id, mechanicId)\n\t\t\t.then((response) => {\n\t\t\t\tthis.onUpdate(response.data);\n\t\t\t\tsetScore(5);\n\t\t\t})\n\t\t\t.catch((error) => setError(`(${error.response.data.code}) - ${error.response.data.message}`))\n\t\t\t.finally(() => setLoading(false))\n\t}\n\n\tonUpdate(data) {\n\t\tconst {setStatus} = this.props;\n\t\tthis.onCleanErrors();\n\t\tsetStatus(data);\n\t}\n\n\tonDropWheel(e) {\n\t\tconst { setMechanic  } = this.props;\n\t\tconst mechanicId = Object.values(e)[0];\n\t\tsetMechanic(mechanicId);\n\t\tthis.onShowTask();\n\t}\n\n\tonDragEnter(position){\n\t\tconst { setWheelPosition } = this.props;\n\t\tsetWheelPosition(position);\n\t}\n\n\tonShowTask() {\n\t\tconst { showTasks } = this.props;\n\t\tthis.onCleanErrors();\n\t\tshowTasks(true);\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { car } = this.props;\n\t\tthis.onCleanErrors();\n\t\t(!car) &&\n\t    \tthis.props.history.push(SECTIONS[0]);\n\t}\n\n\trender() {\n\t\tconst { car, wheel_tasks, error, loading } = this.props;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{\n\t\t\t\t\t(loading) && <Overlay />\n\t\t\t\t}\n\t\t\t\t<StyledCar>\n\t\t\t\t{\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Droppable types={[\"gasman\"]} onDrop={this.onFillTank.bind(this)}>\n\t\t\t\t\t\t\t<ListPartsUl>\n\t\t\t\t\t\t\t\t<CarPartsLi key=\"fuel\">\n\t\t\t\t\t\t\t\t\t<div className={`car-wheel fuel`}></div>\n\t\t\t\t\t\t\t\t</CarPartsLi>\n\t\t\t\t\t\t\t</ListPartsUl>\t\t\n\t\t\t\t\t\t</Droppable>\n\t\t\t\t\t\t{ \n\t\t\t\t\t\t\t(car && car.wheels && car.wheels.length > 0) && (\n\t\t\t\t\t\t\t\t<ListPartsUl>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcar.wheels.map((wheel) => (\n\t\t\t\t\t\t\t\t\t\t\t<CarPartsLi key={wheel.position}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={`car-wheel ${wheel.position}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Droppable \n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypes={[\"mechanic\"]} \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"drop\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDrop={this.onDropWheel.bind(this)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDragEnter={() => this.onDragEnter(wheel.position)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{wheel.status}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Droppable>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</CarPartsLi>\t\n\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t}\n\n\t\t \t\t\t\t\t\t</ListPartsUl>\n\t \t\t\t\t\t\t) \n\t\t\t\t\t\t}\n \t\t\t\t\t\n\n\t \t\t\t\t\t<Droppable types={[\"jackman\"]} onDrop={this.onLiftCar.bind(this)}>\t\n\t \t\t\t\t\t\t<ListPartsUl>\n\t\t \t\t\t\t\t\t<CarPartsLi key=\"lifted\">\n\t\t\t\t\t\t\t\t\t<div className={`car-wheel lifted`}></div>\n\t\t\t\t\t\t\t\t</CarPartsLi>\n\t\t\t\t\t\t\t</ListPartsUl>\t\n\t\t\t\t\t\t</Droppable>\n \t\t\t\t\t</React.Fragment>\n\t\t\t\t}\n\t\t\t\t</StyledCar>\n\t\t\t\t<RowStatus>\n\t\t\t\t\t<StyledText>{`Fuel ${car.fuel}`}</StyledText>\n\t\t\t\t\t<StyledText>{(car.lifted) ? \"Lifted\" : \"No Lifted\"}</StyledText>\n\t\t\t\t</RowStatus>\n\t\t\t\t<Row>\n\t\t\t\t\t{\n\t\t\t\t\t\t(error) && <StyledTextError>{error}</StyledTextError>\n\t\t\t\t\t}\n\n\t\t\t\t\t<ListTasks tasks={wheel_tasks} onUpdate={this.onUpdate} />\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t)\n\n\n\t}\n\n}\n\nexport default withRouter(Car);"]},"metadata":{},"sourceType":"module"}